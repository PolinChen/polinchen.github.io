<!DOCTYPE html>
<html>

    <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="shortcut icon" href="/assets/ico/favicon.ico">

    <title>TTPOC. - 10 Elasticsearch Concepts You Need to Learn</title>

    <!-- Bootstrap core CSS -->
    <link href="/assets/css/bootstrap.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="/assets/css/style.css" rel="stylesheet">
    <link href="/assets/css/font-awesome.min.css" rel="stylesheet">
    
    <!-- Custom CSS -->
    <!--<link rel="stylesheet" href="/css/main.css">-->


    <!-- Just for debugging purposes. Don't actually copy this line! -->
    <!--[if lt IE 9]><script src="../../assets/js/ie8-responsive-file-warning.js"></script><![endif]-->

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>

    <body>
        <!-- Fixed navbar -->
<div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/">TTPOC.</a>
    </div>
    <div class="navbar-collapse collapse navbar-right">
      <ul class="nav navbar-nav">
        <li ><a href="/">HOME</a></li>
        <li ><a href="/products/">PRODUCTS</a></li>
        <li ><a href="/blog/">BLOG</a></li>
        <li ><a href="/portfolio/">PORTFOLIO</a></li>
        <li ><a href="/about/">ABOUT</a></li>
        <li ><a href="/contact/">CONTACT</a></li>
      </ul>
    </div><!--/.nav-collapse -->
  </div>
</div>


            <div id="blue">
    <div class="container">
        <div class="row">
            <h3>10 Elasticsearch Concepts You Need to Learn</h3>
        </div><!-- /row -->
    </div> <!-- /container -->
</div><!-- /blue -->



<div class="container mtb">
    <div class="row">
        <! -- SINGLE POST -->
        <div class="col-lg-8">
            <! -- Blog Post  -->
            <p><img class="img-responsive" src="/assets/img/blog/bomb.jpg"></p>
            <a href="/blog/elk/devops/elk-10concept"><h3 class="ctitle">10 Elasticsearch Concepts You Need to Learn</h3></a>
            <p><csmall>Jun 28, 2016. | By: Polin</csmall></p>
              
            <p><img src="http://logz.io/wp-content/uploads/2016/06/elastic.png" alt="" /></p>

<p>依據ELK的10大特點分別說明如下：</p>

<h2 id="fields">1. Fields</h2>

<p>字段是在Elasticsearch數據的最小單個的單元。每個字段有一個定義的類型和包含數據的一個單件，可以是，例如，一個布爾，字符串或數組表達。字段集合在一起的單一Elasticsearch文檔。</p>

<p>與Elasticsearch2.x版本開始，字段名不能包含特殊字符開始，並且不能包含點。</p>

<h2 id="documents">2. Documents</h2>
<p>文件是存儲一個Elasticsearch索引中，並且被認為存儲的基本單元JSON對象。在關係型數據庫的世界中，文件可以比在表中的一行。</p>

<p>例如，讓我們假設你正在運行的電子商務應用。你可以有每個產品一個文檔或每一個訂單一個文檔。沒有限制多少文件，你可以在一個特定的索引存儲。</p>

<p>在文檔中的數據與由鍵和值的字段中定義。一個關鍵是字段的名稱和一個值可以是許多不同類型的項目，例如一個字符串，一個號碼，一個布爾表達式，另一個目的，或值的數組。</p>

<p>文檔中還含有構成文檔元數據，如保留字段：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>* _index - 索引文件所在的所在
* _type - 該文件表示類型
* _id - 文檔的唯一標識符
</code></pre>
</div>

<p>一個文件的範本</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="p">{</span>
   <span class="s2">"_id"</span><span class="err">:</span> <span class="mi">3</span><span class="p">,</span>
   <span class="err">“</span><span class="nx">_type</span><span class="err">”:</span> <span class="p">[</span><span class="err">“</span><span class="nx">user</span><span class="err">”</span><span class="p">],</span>
   <span class="s2">"age"</span><span class="err">:</span> <span class="mi">28</span><span class="p">,</span>
   <span class="s2">"name"</span><span class="err">:</span> <span class="p">[</span><span class="s2">"daniel”],
   "</span><span class="nx">year</span><span class="err">":</span><span class="mi">1989</span><span class="p">,</span> 
<span class="p">}</span></code></pre></figure>

<h2 id="types">3. Types</h2>

<p>Elasticsearch類型的文件中使用細分類似類型的數據，其中每個類型表示一個唯一的類的文件。類型由一個名稱以及映射（見下文）並通過添加_type領域被使用。查詢特定類型時，該字段可以被用於過濾。</p>

<p>索引可具有任何數目的類型，並且可以存儲在同一個索引屬於這些類型的文件。</p>

<h2 id="mapping">4. Mapping</h2>

<p>像在關係數據庫的世界的模式，映射定義駐留在索引內的不同的類型。它定義為特定類型的文件的字段 - 數據類型（如串和整數），以及如何字段應該被索引並存儲在Elasticsearch。</p>

<p>一個映射可以明確定義或文檔時使用模板索引自動生成。 （模板包括設置和映射，可以自動應用到一個新的索引。）</p>

<div class="highlighter-rouge"><pre class="highlight"><code># Example
curl -XPUT localhost:9200/example -d '{
  "mappings": {
    "mytype": {
      "properties": {
        "name": {
          "type": "string"
        },
        "age": {
          "type": "long"
        }
      }
    }
  }
}'
</code></pre>
</div>

<h2 id="index">5. Index</h2>
<p>Indices，在Elasticsearch最大的數據單元，是文件的邏輯分區，可相比於關係數據庫世界的數據庫。</p>

<p>繼續我們的電子商務應用的例子，你可以有一個包含所有相關的產品和其他所有相關客戶數據的數據的一個索引。</p>

<p>只要你想，你可以在Elasticsearch定義為多指數。反過來，這些都會認為是唯一的每個索引文件。</p>

<p>Indices是由指的是執行針對各指數裡面的文件操作（如搜索和刪除）操作小寫名稱標識。</p>

<h2 id="shards">6. Shards</h2>
<p>簡單地說，shards 是一個單一的Lucene索引。他們是Elasticsearch的積木，並且是什麼促進其可擴展性。</p>

<p>index 的大小是Elasticsearch崩潰的常見原因。由於沒有限制多少文檔可以在每個索引存儲，index可能需要的超過了託管服務器的限度磁盤空間的量。一旦指數接近這個極限，索引將開始失敗。</p>

<p>為解決這一問題的方法之一是在水平方向分割指數成片稱為shards。這使您可以跨shards和nodes分發操作，以提高性能。</p>

<p>當您創建一個index，你可以定義你要多少shards。每個shards是可以在任何地方你的群集託管一個獨立的Lucene索引：</p>

<div class="highlighter-rouge"><pre class="highlight"><code># Example
curl -XPUT localhost:9200/example -d '{
  "settings" : {
    "index" : {
      "number_of_shards" : 2, 
      "number_of_replicas" : 1 
    }
  }
}'
</code></pre>
</div>

<h2 id="replicas">7. Replicas</h2>

<p>Relicas，顧名思義，是Elasticsearch故障安全機制和基本上索引的shards的副本。這為有用備份系統 - 或，換句話說，當節點崩潰。副本也服務讀請求，因此增加的副本可以幫助提高搜索性能。</p>

<p>以確保高可用性，複製品不放在同一個節點與原始shards（稱為“主”shards）從它們被複製在。</p>

<p>像與shards，複製品的數量可以每索引創建索引時定義。不像碎片，但是，您可能隨時創建索引後更改副本的數量。</p>

<p>參見上面的“碎片”部分中的例子。</p>

<h2 id="analyzers">8. Analyzers</h2>

<p>Analyzers 為索引短語或表達式分解成術語時使用。索引中定義，Analyzers由一個單一的標記生成器和任意數量的記號過濾的。例如，遇到一個具體體現，當一個標記可能分裂字符串轉換成明確定義的術語。</p>

<p>默認情況下，Elasticsearch將適用“標準”的analyzers，其中包含一個基於語法的標記生成器，消除常見的英語單詞和適用附加的過濾器。 Elasticsearch也有一系列內置斷詞的捆綁，以及，你也可以使用自定義的標記生成器。</p>

<p>語法過濾器用於過濾或修改某些標記。例如，ASCII折疊式過濾器將轉換成字符，如 ê, é, è to e.</p>

<div class="highlighter-rouge"><pre class="highlight"><code># Example
curl -XPUT localhost:9200/example -d '{
  "mappings": {
    "mytype": {
      "properties": {
        "name": {
          "type": "string",
          "analyzer": "whitespace"
        }
      }
    }
  }
}'
</code></pre>
</div>

<h2 id="nodes">9.Nodes</h2>
<p>任何ELK設置的心臟是Elasticsearch實例，它具有存儲和索引數據的重要任務。</p>

<p>在一個集群中，不同的責任分配給各個節點類型：
- 數據節點(Data nodes) - 存儲數據並執行數據相關的操作，如搜索和聚合
- 主節點(Master nodes) - 負責集群範圍內的管理和配置操作，比如添加和刪除節點
- 客戶機節點(Client nodes) - 轉發簇請求到主節點和數據相關的請求到數據節點
- 部落節點(Tribe nodes) - 作為一個客戶端節點，執行讀取和集群中的編寫針對所有節點的操作
- 食入節點（Ingestion nodes) 這是Elasticsearch 5.0新 - 用於索引前預處理文件</p>

<p>默認情況下，每個節點被自動分配一個唯一的標識符或名稱，是用於管理目的，並在多節點變得更加重要，或群集，環境。</p>

<p>安裝時，一個節點將形成題為一個新的單節點集群“elasticsearch”，但它也可以使用群集名稱配置為加入現有群集（見下文）。不用說，這些節點需要能夠識別彼此能夠連接。</p>

<p>在開發或測試環境中，您可以在一台服務器上建立多個節點。在生產中，然而，由於該一Elasticsearch節點消耗的資源量，建議有一個單獨的服務器上運行的每個Elasticsearch實例。</p>

<h2 id="section">10.集群</h2>
<p>一個Elasticsearch集群由一個或多個Elasticsearch節點。與節點，每個集群具有一個唯一的標識符，必須通過嘗試加入群集的任何節點可使用。默認情況下，群集名稱為“elasticsearch”，但是這個名字是可以改變的，當然。</p>

<p>集群中的一個節點是“主”節點，這是負責的集群範圍內的管理和配置操作（如添加和刪除節點）。該節點是由群集自動選擇，但如果失敗，是可以改變的。 （見上文對其他類型的集群中的節點。）</p>

<p>集群中的任何節點都可以進行查詢，包括“主”節點。但是，節點也向前查詢到包含被查詢的數據的節點。</p>

<p>隨著集群的增長，它會自行重組來傳播數據。</p>

<p>還有一些有用的簇的API可以查詢群集的一般狀態。</p>

<p>例如，群集健康API返回的任一的“綠色”健康狀態報告（所有碎片分配），“黃”（主碎片被分配但複製品都沒有），或“紅”（碎片沒有在分配的簇）。更多關於群集API是在這裡。</p>

<div class="highlighter-rouge"><pre class="highlight"><code># Output Example
{
  "cluster_name" : "elasticsearch",
  "status" : "yellow",
  "timed_out" : false,
  "number_of_nodes" : 1,
  "number_of_data_nodes" : 1,
  "active_primary_shards" : 5,
  "active_shards" : 5,
  "relocating_shards" : 0,
  "initializing_shards" : 0,
  "unassigned_shards" : 5,
  "delayed_unassigned_shards" : 0,
  "number_of_pending_tasks" : 0,
  "number_of_in_flight_fetch" : 0,
  "task_max_waiting_in_queue_millis" : 0,
  "active_shards_percent_as_number" : 50.0
}
</code></pre>
</div>

<p><img src="http://logz.io/blog/10-elasticsearch-concepts/?utm_source=facebook&amp;utm_medium=social&amp;utm_content=10_elasticsearch_concepts&amp;utm_campaign=blog_post" alt="logz.io" /></p>



            <div class="spacing"></div>
            <!-- <h6>SHARE:</h6>
            <p class="share">
                <a href="#"><i class="fa fa-twitter"></i></a>
                <a href="#"><i class="fa fa-facebook"></i></a>
                <a href="#"><i class="fa fa-tumblr"></i></a>
                <a href="#"><i class="fa fa-google-plus"></i></a>		 		
            </p> -->
        </div><! --/col-lg-8 -->
        
        <div class="col-lg-3">
   <!--  <h4>Search</h4>
    <div class="hline"></div>
        <p>
            <br/>
            <input type="text" class="form-control" placeholder="Search something">
        </p>
    <div class="spacing"></div> -->
    <h4>Subscribe</h4>
    <div class="hline"></div>
        <p>
            <p class="rss-subscribe">Subscribe to this blog <a href="/feed.xml">via RSS</a>.</p>
        </p>
    <div class="spacing"></div>
    <h4>Categories</h4>
    <div class="hline"></div>
    
        <p>
            <a href="/category/#Tips&Tricks"><i class="fa fa-angle-right"></i> Tips&tricks</a>
            <span class="badge badge-theme pull-right">1</span>
        </p>
    
        <p>
            <a href="/category/#Code-Snippets"><i class="fa fa-angle-right"></i> Code-snippets</a>
            <span class="badge badge-theme pull-right">1</span>
        </p>
    
        <p>
            <a href="/category/#Web-Design"><i class="fa fa-angle-right"></i> Web-design</a>
            <span class="badge badge-theme pull-right">1</span>
        </p>
    
        <p>
            <a href="/category/#Development"><i class="fa fa-angle-right"></i> Development</a>
            <span class="badge badge-theme pull-right">1</span>
        </p>
    
        <p>
            <a href="/category/#ELK"><i class="fa fa-angle-right"></i> Elk</a>
            <span class="badge badge-theme pull-right">16</span>
        </p>
    
        <p>
            <a href="/category/#DevOps"><i class="fa fa-angle-right"></i> Devops</a>
            <span class="badge badge-theme pull-right">15</span>
        </p>
    
        <p>
            <a href="/category/#iPOC"><i class="fa fa-angle-right"></i> Ipoc</a>
            <span class="badge badge-theme pull-right">1</span>
        </p>
    
        <p>
            <a href="/category/#NMON"><i class="fa fa-angle-right"></i> Nmon</a>
            <span class="badge badge-theme pull-right">3</span>
        </p>
    
        <p>
            <a href="/category/#DEVOPS"><i class="fa fa-angle-right"></i> Devops</a>
            <span class="badge badge-theme pull-right">1</span>
        </p>
    

    <div class="spacing"></div>

    <h4>Recent Posts</h4>
    <div class="hline"></div>
        <ul class="popular-posts">
             
                <li>
                    <a href="/blog/elk/nmon/elktop10"><img src="/assets/img/blog/thumbs/thumb02.jpg" alt="Popular Post"></a>
                    <p><a href="/blog/elk/nmon/elktop10">Top 10 reason for ELK</a></p>
                <em>Posted on 10 Jul 2016</em>
            </li>
             
                <li>
                    <a href="/blog/elk/devops/devopsKKK"><img src="/assets/img/blog/thumbs/thumb01.jpg" alt="Popular Post"></a>
                    <p><a href="/blog/elk/devops/devopsKKK">NMONS iPOC 維運分析評估改</a></p>
                <em>Posted on 02 Jul 2016</em>
            </li>
             
                <li>
                    <a href="/blog/elk/devops/elkplusdevops"><img src="/assets/img/blog/thumbs/thumb01.jpg" alt="Popular Post"></a>
                    <p><a href="/blog/elk/devops/elkplusdevops">DevOps for ELK</a></p>
                <em>Posted on 01 Jul 2016</em>
            </li>
             
                <li>
                    <a href="/blog/elk/devops/elkcase1"><img src="/assets/img/blog/thumbs/thumb01.jpg" alt="Popular Post"></a>
                    <p><a href="/blog/elk/devops/elkcase1">大海撈針：使用ELK 做異常檢測</a></p>
                <em>Posted on 01 Jul 2016</em>
            </li>
             
        </ul>

    <div class="spacing"></div>

    <h4>Popular Tags</h4>
    <div class="hline"></div>
    <p>
    
            <a class="btn btn-theme" href="/category/#Tips&Tricks" role="button">Tips&tricks (1)</a>	         
        
            <a class="btn btn-theme" href="/category/#Code-Snippets" role="button">Code-snippets (1)</a>	         
        
            <a class="btn btn-theme" href="/category/#Web-Design" role="button">Web-design (1)</a>	         
        
            <a class="btn btn-theme" href="/category/#Development" role="button">Development (1)</a>	         
        
            <a class="btn btn-theme" href="/category/#ELK" role="button">Elk (16)</a>	         
        
            <a class="btn btn-theme" href="/category/#DevOps" role="button">Devops (15)</a>	         
        
            <a class="btn btn-theme" href="/category/#iPOC" role="button">Ipoc (1)</a>	         
        
            <a class="btn btn-theme" href="/category/#NMON" role="button">Nmon (3)</a>	         
        
            <a class="btn btn-theme" href="/category/#DEVOPS" role="button">Devops (1)</a>	         
        
    </p>
</div>


    </div><! --/row -->
</div><! --/container -->

        <div id="footerwrap">
    <div class="container">
        <div class="row">
            <div class="col-lg-4">
                <h4>About</h4>
                <div class="hline-w"></div>
                <p>Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s.</p>
            </div>
            <div class="col-lg-4">
                <h4>Social Links</h4>
                <div class="hline-w"></div>
                <p>
                    
                        <a href="" class="btn-social btn-outline"><i class="fa fa-dribbble"></i></a>
                    
                        <a href="" class="btn-social btn-outline"><i class="fa fa-facebook"></i></a>
                    
                        <a href="" class="btn-social btn-outline"><i class="fa fa-twitter"></i></a>
                    
                        <a href="" class="btn-social btn-outline"><i class="fa fa-instagram"></i></a>
                    
                        <a href="" class="btn-social btn-outline"><i class="fa fa-tumblr"></i></a>
                    
                </p>
            </div>
            <div class="col-lg-4">
                <h4>Our Bunker</h4>
                <div class="hline-w"></div>
                <p>
                    
                        Some Ave, 987, <br>
                    
                        23890, New York, <br>
                    
                        United States. <br>
                    
                </p>
            </div>
        </div><! --/row -->
    </div><! --/container -->
</div><! --/footerwrap -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
<script src="/assets/js/bootstrap.min.js"></script>
<script src="/assets/js/retina-1.1.0.js"></script>
<script src="/assets/js/jquery.hoverdir.js"></script>
<script src="/assets/js/jquery.hoverex.min.js"></script>
<script src="/assets/js/jquery.prettyPhoto.js"></script>
<script src="/assets/js/jquery.isotope.min.js"></script>
<script src="/assets/js/custom.js"></script>

<script>
// Portfolio
(function($) {
	"use strict";
	var $container = $('.portfolio'),
		$items = $container.find('.portfolio-item'),
		portfolioLayout = 'fitRows';
		
		if( $container.hasClass('portfolio-centered') ) {
			portfolioLayout = 'masonry';
		}
				
		$container.isotope({
			filter: '*',
			animationEngine: 'best-available',
			layoutMode: portfolioLayout,
			animationOptions: {
			duration: 750,
			easing: 'linear',
			queue: false
		},
		masonry: {
		}
		}, refreshWaypoints());
		
		function refreshWaypoints() {
			setTimeout(function() {
			}, 1000);   
		}
				
		$('nav.portfolio-filter ul a').on('click', function() {
				var selector = $(this).attr('data-filter');
				$container.isotope({ filter: selector }, refreshWaypoints());
				$('nav.portfolio-filter ul a').removeClass('active');
				$(this).addClass('active');
				return false;
		});
		
		function getColumnNumber() { 
			var winWidth = $(window).width(), 
			columnNumber = 1;
		
			if (winWidth > 1200) {
				columnNumber = 5;
			} else if (winWidth > 950) {
				columnNumber = 4;
			} else if (winWidth > 600) {
				columnNumber = 3;
			} else if (winWidth > 400) {
				columnNumber = 2;
			} else if (winWidth > 250) {
				columnNumber = 1;
			}
				return columnNumber;
			}       
			
			function setColumns() {
				var winWidth = $(window).width(), 
				columnNumber = getColumnNumber(), 
				itemWidth = Math.floor(winWidth / columnNumber);
				
				$container.find('.portfolio-item').each(function() { 
					$(this).css( { 
					width : itemWidth + 'px' 
				});
			});
		}
		
		function setPortfolio() { 
			setColumns();
			$container.isotope('reLayout');
		}
			
		$container.imagesLoaded(function () { 
			setPortfolio();
		});
		
		$(window).on('resize', function () { 
		setPortfolio();          
	});
})(jQuery);
</script>
    </body>
</html>